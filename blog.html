<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blog</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="main">
    <div class="container">
      <h1>Blog</h1>
      <div id="blog-posts" class="posts-list"></div>
    </div>
  </main>

  <script type="module">
    // Blog posts data
    const blogPosts = [
      // Added the new post entry so it appears in the blog index
      {
        date: '2025-11-11',
        title: 'My favorite music to listen to',
        description: "I've spent some time curating my music taste. I spend a lot of time listening to music, so here are some recommendations.",
        slug: 'music_post'
      }
    ];

    // Helper to format date to a nicer string
    function formatDate(iso) {
      try {
        const d = new Date(iso);
        return d.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });
      } catch {
        return iso;
      }
    }

    // Render posts into the page
    function renderBlogPosts() {
      const blogPostsContainer = document.getElementById('blog-posts');
      if (!blogPostsContainer) return;

      if (blogPosts.length === 0) {
        blogPostsContainer.innerHTML = '<p style="color: var(--text-secondary);">Coming Soon</p>';
        return;
      }

      const html = blogPosts.map(post => {
        // linkTo tries both posts/<slug>.html and /posts/<slug>/ to match different setups
        const link1 = `posts/${post.slug}.html`;
        const link2 = `posts/${post.slug}/`;
        const url = link1; // choose link1 by default; adjust if your hosting uses folder-per-post
        return `
          <article class="post-preview">
            <a class="post-link" href="${url}">
              <h2 class="post-title">${post.title}</h2>
            </a>
            <div class="post-meta">${formatDate(post.date)}</div>
            <p class="post-excerpt">${post.description}</p>
          </article>
        `;
      }).join('\n');

      blogPostsContainer.innerHTML = html;
    }

    // Run
    renderBlogPosts();
  </script>
</body>
</html>
